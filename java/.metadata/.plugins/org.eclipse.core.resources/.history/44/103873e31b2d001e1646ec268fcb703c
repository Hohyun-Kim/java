package com.ssafy.trip.util;

import java.util.ArrayList;
import java.util.List;
import org.xml.sax.Attributes;
import org.xml.sax.helpers.DefaultHandler;
import com.ssafy.trip.model.dto.FestivalDto;


public class FestivalSAXHandler extends DefaultHandler {

  /** 축제 연번 */
  private int num;
  /** 축제 정보를 담는다 */
  private List<FestivalDto> festivals;
  /** 파싱힌 축제 정보 */
  private FestivalDto festivalDto;
  /** 태그 바디 정보를 임시로 저장 */
  private String temp;

  public FestivalSAXHandler() {
    festivals = new ArrayList<FestivalDto>();
  }

  @Override
  public void startElement(String uri, String localName, String qName, Attributes att) {
    temp = "";
    if (qName.equals("세부현황")) {
      festivalDto = new FestivalDto();
      festivals.add(festivalDto);
    }
  }

  @Override
  public void endElement(String uri, String localName, String qName) {
    if (qName.equals("관광지명")) {
      festivalDto.setTouristDestination(temp);
    } else if (qName.equals("소재지도로명주소")) {
      festivalDto.setStreetAddress(temp);
    } else if (qName.equals("소재지지번주소")) {
      festivalDto.setLotAddress(temp);
    } else if (qName.equals("위도")) {
      if (temp.length() != 0)
        tripDto.setLat(Double.parseDouble(temp));
    } else if (qName.equals("경도")) {
      if (temp.length() != 0)
        tripDto.setLng(Double.parseDouble(temp));
    } else if (qName.equals("관광지소개")) {
      tripDto.setInfo(temp);
    } else if (qName.equals("관리기관전화번호")) {
      tripDto.setTel(temp);
    }
  }

  @Override
  public void characters(char[] ch, int start, int length) {
    temp = new String(ch, start, length);
  }

  public List<FestivalDto> getFestivals() {
    return festivals;
  }

}
