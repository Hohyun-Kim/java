package com.ssafy.trip.util;

import java.util.ArrayList;
import java.util.List;
import org.xml.sax.Attributes;
import com.ssafy.trip.model.dto.FestivalDto;
import com.ssafy.trip.model.dto.TripDto;
import jdk.internal.org.xml.sax.helpers.DefaultHandler;

public class FestivalSAXHandler extends DefaultHandler {

  /** 축제 연번 */
  private int num;
  /** 축제 정보를 담는다 */
  private List<FestivalDto> festivals;
  /** 파싱힌 축제 정보 */
  private TripDto tripDto;
  /** 태그 바디 정보를 임시로 저장 */
  private String temp;

  public TouristDestinationSAXHandler() {
    trips = new ArrayList<TripDto>();
  }

  @Override
  public void startElement(String uri, String localName, String qName, Attributes att) {
    temp = "";
    if (qName.equals("record")) {
      tripDto = new TripDto(num++);
      tripDto.setImg("image" + String.valueOf(num) + ".jpg");
      trips.add(tripDto);
    }
  }

  @Override
  public void endElement(String uri, String localName, String qName) {
    if (qName.equals("관광지명")) {
      tripDto.setTouristDestination(temp);
    } else if (qName.equals("소재지도로명주소")) {
      tripDto.setStreetAddress(temp);
    } else if (qName.equals("소재지지번주소")) {
      tripDto.setLotAddress(temp);
    } else if (qName.equals("위도")) {
      if (temp.length() != 0)
        tripDto.setLat(Double.parseDouble(temp));
    } else if (qName.equals("경도")) {
      if (temp.length() != 0)
        tripDto.setLng(Double.parseDouble(temp));
    } else if (qName.equals("관광지소개")) {
      tripDto.setInfo(temp);
    } else if (qName.equals("관리기관전화번호")) {
      tripDto.setTel(temp);
    }
  }

  @Override
  public void characters(char[] ch, int start, int length) {
    temp = new String(ch, start, length);
  }

  public List<TripDto> getTrips() {
    return trips;
  }

}
